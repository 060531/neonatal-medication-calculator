{% extends "base.html" %}
{% block title %}Phenobarbital: ‡∏Ñ‡∏¥‡∏î mL ‡∏à‡∏≤‡∏Å mg + ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ú‡∏™‡∏°{% endblock %}

{% block content %}
<style>
  :root { color-scheme: light; }

  /* ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì */
  .card{
    max-width:680px;margin:24px auto;background:#fff;border:1px solid #e5e7eb;
    border-radius:16px;padding:20px 20px 16px;box-shadow:0 10px 24px rgba(2,8,23,.12)
  }
  .title{margin:0 0 8px 0;font-size:22px;font-weight:800;color:#0f172a;text-align:center}
  .hint{color:#475569;text-align:center;margin-bottom:12px}
  .row{display:grid;grid-template-columns:1fr auto;gap:10px;align-items:end;margin-top:8px}
  label{font-weight:700;color:#0f172a}
  input[type="number"]{width:100%;padding:12px;border:1px solid #cbd5e1;border-radius:10px}
  .btn{padding:12px 16px;border-radius:10px;border:0;background:#0ea5e9;color:#fff;font-weight:800;cursor:pointer}
  .btn:hover{filter:brightness(.97)}
  .err{color:#b91c1c;margin-top:8px;text-align:center;font-weight:700}

  .result{margin-top:14px;padding:14px;border-radius:12px;background:#f8fafc;border:1px dashed #cbd5e1}
  .big{font-size:28px;font-weight:900;color:#111827;text-align:center}

  /* ‡∏™‡∏π‡∏ï‡∏£/‡πÅ‡∏ó‡∏ô‡∏Ñ‡πà‡∏≤‚Äî‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÄ‡∏î‡∏µ‡∏¢‡∏ß */
  .formula { text-align:center }
  .formula .line{
    display:flex; gap:8px; align-items:center; justify-content:center;
    flex-wrap:nowrap; white-space:nowrap;
  }
  .mono{
    font-family: ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;
    font-weight:800; padding:2px 6px; border-radius:6px;
    background:#e7527e; color:#fff;
  }
  @media (max-width: 400px){
    .formula .line{ flex-wrap:wrap; white-space:normal; }
  }

/* ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö (‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö 1 ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡πÄ‡∏™‡∏°‡∏≠) */
.sections.one-col{
  display: flex;
  flex-direction: column;
  gap: 16px;
  max-width: 900px;
  margin: 18px auto 0;
}

/* ‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏™‡πà‡∏ß‡∏ô + ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏ä‡∏¥‡∏î‡∏ã‡πâ‡∏≤‡∏¢ */
.section{
  background: #ffffff;
  border: 1px solid #e5e7eb;
  border-radius: 16px;
  padding: 14px 16px;
  text-align: left;            /* ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏ä‡∏¥‡∏î‡∏ã‡πâ‡∏≤‡∏¢ */
}

/* ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á */
.section h3{
  margin: 0 0 6px 0;
  font-size: 18px;
  font-weight: 800;
  color: #0f172a;
  text-align: center;          /* ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á */
}

/* ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°/‡∏•‡∏¥‡∏™‡∏ï‡πå‡∏†‡∏≤‡∏¢‡πÉ‡∏ô ‡πÉ‡∏´‡πâ‡∏ä‡∏¥‡∏î‡∏ã‡πâ‡∏≤‡∏¢‡πÄ‡∏™‡∏°‡∏≠ */
.section p{
  margin: 6px 0;
  color: #334155;
  text-align: left;
}
.section ul{
  margin: 6px 0 0 18px;
  color: #334155;
  text-align: left;
}

/* ‡πÑ‡∏Æ‡πÑ‡∏•‡∏ï‡πå‡∏ï‡∏±‡∏ß‡∏´‡∏ô‡∏≤ */
.hl{
  font-weight: 800;
  color: #0f172a;
}

.header-box{
    background: linear-gradient(180deg,#8ad2f8,#e2e8f0); /* ‡πÑ‡∏•‡πà‡∏™‡∏µ‡∏≠‡πà‡∏≠‡∏ô */
    border:1px solid #97a7c9;
    border-radius:18px;
    padding:18px 20px;
    box-shadow: 0 8px 22px rgba(2,8,23,.10);
  }
  .header-box h2{ margin:0; color:#0f172a; font-weight:800; }

  /* ===== ‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏≠‡∏¢‡∏•‡πà‡∏≤‡∏á-‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á ===== */
  .foot-actions{
    position: fixed;
    left: 50%;
    bottom: 18px;
    transform: translateX(-50%);
    display: flex; gap: 12px; justify-content: center; align-items: center;

    background: rgba(255, 255, 255, 0.525);
    backdrop-filter: blur(6px);
    -webkit-backdrop-filter: blur(6px);
    padding: 10px 12px;
    border: 1px solid rgba(15,23,42,0.08);
    border-radius: 14px;
    box-shadow: 0 10px 24px rgba(2,8,23,.18);
    z-index: 60;
  }
  .foot-actions a{
    display:inline-block;text-decoration:none;color:#ffffff;font-weight:600;
    padding:6px 17px;border-radius:9px;min-width:0px;text-align:center;
  }
  .back{ background:#64748b; }
  .home{ background:#16a34a; }
  @media (max-width: 560px){
    .foot-actions{ gap:8px; padding:8px 10px; bottom:12px; }
    .foot-actions a{ min-width:150px; padding:12px 16px; }
  }
</style>
    <div class="container">
          <div class="header-box">
            <h2>Phenobarbital 200 mg/mL</h2>
        </div>
    </div>
        
<div class="card">
  <h2 class="title">Phenobarbital</h2>
  <div class="hint">
    ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏°‡∏Ç‡πâ‡∏ô‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô <b>{{ '%g'|format(target_conc) }} mg/ml</b><br>
    <small>‡∏™‡∏π‡∏ï‡∏£: ml = mg √∑ {{ '%g'|format(target_conc) }}</small>
  </div>

  <form method="post" class="row">
    <div>
      <label>‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ (mg)</label>
      <input type="number" step="0.01" min="0" name="dose" value="{{ dose or '' }}" required>
    </div>
    <button class="btn" type="submit">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì</button>
  </form>

  {% if error %}
    <div class="err">‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: {{ error }}</div>
  {% endif %}

  {% if vol_ml is not none %}
    <div class="result">
      <div class="big">{{ '%.2f'|format(vol_ml) }} ml</div>
      <div class="hint">‡πÉ‡∏´‡πâ‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡∏ô‡∏µ‡πâ‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏°‡∏Ç‡πâ‡∏ô {{ '%g'|format(target_conc) }} mg/ml</div>

      <!-- ‡∏™‡∏π‡∏ï‡∏£/‡πÅ‡∏ó‡∏ô‡∏Ñ‡πà‡∏≤ (‡πÅ‡∏ñ‡∏ß‡πÄ‡∏î‡∏µ‡∏¢‡∏ß) -->
      <div class="formula">
        <div class="line">
          <span class="hl">‡∏™‡∏π‡∏ï‡∏£:</span>
          <span class="mono">ml = mg √∑ {{ '%g'|format(target_conc) }}</span>
        </div>
        <div class="line" style="margin-top:6px">
          <span>‡πÅ‡∏ó‡∏ô‡∏Ñ‡πà‡∏≤:</span>
          <span class="mono">{{ '%.2f'|format(dose) }} √∑ {{ '%g'|format(target_conc) }} = {{ '%.2f'|format(vol_ml) }} ml</span>
        </div>
      </div>

      <!-- ‡∏Ñ‡∏á‡∏ö‡∏•‡πá‡∏≠‡∏Ñ‡∏™‡∏π‡∏ï‡∏£ 1 mL + 9 mL = 20 mg/mL ‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏Ç‡∏≠ -->
      <div class="section" style="margin-top:12px">
        <h3 style="text-align:center;margin:0 0 6px 0">‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ú‡∏™‡∏° : 1 ml(phenobarbital) + 9 ml(D5W/NSS) = 20 mg/ml</h3>

        {# ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ä‡∏∏‡∏î 1+9 ‡πÑ‡∏î‡πâ 10 mL @ 20 mg/ml = 200 mg ‡∏ï‡πà‡∏≠‡∏ä‡∏∏‡∏î #}
        {% set batch_vol_ml = 10.0 %}
        {% set batch_mg = 200.0 %}
        {% set batches = (dose // batch_mg)|int + (1 if (dose % batch_mg) > 0 else 0) %}
        {% set last_batch_mg = (dose - batch_mg * (batches - 1)) if batches > 0 else 0 %}
        {% set last_batch_vol = last_batch_mg / 20.0 %}

        <ul>
          <li>‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ <b>{{ '%.2f'|format(last_batch_mg) }} mg</b> = <b>{{ '%.2f'|format(last_batch_vol) }} ml</b> (20 mg/ml)</li>
        </ul>

      </div>
    </div>
  {% endif %}
</div>

<!-- üîπ ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (1 ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡πÄ‡∏™‡∏°‡∏≠) -->
<div class="sections one-col">

  <div class="section">
    <h3>üîπ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô</h3>
    <ul>
      <li><span class="hl">Phenobarbital sodium (Ampule)</span> 1 mL = <b>200 mg/ml</b> (‡πÄ‡∏Ç‡πâ‡∏°‡∏Ç‡πâ‡∏ô‡∏™‡∏π‡∏á)</li>
      <li><b>‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏à‡∏∑‡∏≠‡∏à‡∏≤‡∏á‡∏Å‡πà‡∏≠‡∏ô‡πÉ‡∏ä‡πâ</b> ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢</li>
    </ul>
  </div>

  <div class="section">
    <h3>üîπ ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ú‡∏™‡∏°</h3>
    <p><b>‡∏Ç‡∏ô‡∏≤‡∏î‡∏¢‡∏≤:</b> Phenobarbital <b>200 mg/ml</b></p>
    <p><b>‡∏ï‡∏±‡∏ß‡∏ó‡∏≥‡∏•‡∏∞‡∏•‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ:</b> SWFI, D5W, D10W, NSS</p>
    <p><b>‡∏™‡∏π‡∏ï‡∏£‡∏à‡∏≥‡∏á‡πà‡∏≤‡∏¢:</b> <code>1 ml phenobarbital + 9 ml diluent = 20 mg/ml</code></p>
  </div>

  <div class="section">
    <h3>üîπ ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏£‡∏à‡∏≥‡∏´‡∏•‡∏±‡∏á‡∏ú‡∏™‡∏°</h3>
    <ul>
      <li>‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏´‡∏•‡∏±‡∏á‡∏ú‡∏™‡∏° (ampule)</li>
      <li>‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏´‡πâ‡∏û‡πâ‡∏ô‡πÅ‡∏™‡∏á</li>
    </ul>
  </div>

  <div class="section">
    <h3>üîπ ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏°‡∏Ç‡πâ‡∏ô‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏Å‡πà‡∏≠‡∏ô‡πÉ‡∏´‡πâ</h3>
    <ul>
      <li>‡∏Ñ‡∏ß‡∏£‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô <b>10 mg/ml</b> ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏∞‡∏Ñ‡∏≤‡∏¢‡πÄ‡∏Ñ‡∏∑‡∏≠‡∏á‡∏´‡∏•‡∏≠‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏î</li>
      <li>‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ <b>‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 1 mg/kg/min</b></li>
    </ul>
  </div>

  <div class="section">
    <h3>üîπ ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏´‡∏•‡∏±‡∏á‡πÉ‡∏´‡πâ‡∏¢‡∏≤ (Monitor)</h3>
    <ul>
      <li>Heart Rate: ‡∏£‡∏∞‡∏ß‡∏±‡∏á bradycardia</li>
      <li>Seizure: ‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏ä‡∏±‡∏Å</li>
      <li>Blood Pressure: ‡∏£‡∏∞‡∏ß‡∏±‡∏á hypotension</li>
    </ul>
  </div>

  <div class="section">
    <h3>üîπ Drug incompatibility (‡∏¢‡∏≤‡∏ó‡∏µ‡πà‡∏´‡πâ‡∏≤‡∏°‡∏ú‡∏™‡∏°‡πÉ‡∏ô‡∏´‡∏•‡∏≠‡∏î‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô)</h3>
    <ul>
      <li>Adrenaline</li>
      <li>Bactrim</li>
      <li>Cefotaxime</li>
      <li>Dobutamine</li>
      <li>Levophed</li>
      <li>Phenytoin</li>
      <li>Fat emulsion</li>
      <li>Ranitidine</li>
    </ul>
  </div>

</div>

<!-- ‡∏õ‡∏∏‡πà‡∏°‡∏•‡πà‡∏≤‡∏á: ‡∏•‡∏≠‡∏¢‡∏ï‡∏¥‡∏î‡∏Ç‡∏≠‡∏ö‡∏•‡πà‡∏≤‡∏á ‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á‡∏à‡∏≠ -->
<div class="foot-actions">
  <a href="{{ url_for('medication_administration') }}" class="back">Back</a>
  <a href="{{ url_for('index') }}" class="home">Back to Home</a>
</div>
{% endblock %}
