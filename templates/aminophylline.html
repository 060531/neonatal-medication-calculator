<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>Aminophylline Calculation</title>
  <style>
    :root{
      --floatbar-gap: 90px; /* กันพื้นที่ให้ footer ไม่โดนปุ่มลอยทับ */
    }

    /* พื้นหลัง + ฟอนต์ */
    body{
      font-family: Arial, sans-serif;
      text-align: center;
      margin:0;
      background-image: url('https://cdn.jsdelivr.net/gh/060531/images/IMG_4200.jpeg');
      background-size: cover; background-repeat: no-repeat; background-position: center; background-attachment: fixed;
      color:#0f172a;
    }

    /* หัวเรื่อง */
    h2{
      color:#f9f9f9;
      font-size:28px; font-weight:bold;
      padding:10px; margin:18px 0 12px;
      border:2px solid #da7676; border-radius:10px;
      display:inline-block; background-color:#d82f2f;
      box-shadow:0 8px 18px rgba(0,0,0,.2);
    }

    /* การ์ดเนื้อหา */
    .container{
      max-width: 600px;
      margin: 0 auto 10px;
      padding: 20px;
      border: 2px solid #e8cabe;
      border-radius: 10px;
      background-color: rgba(245,146,146,0.90);
      position: relative; z-index: 0;
      box-shadow:0 8px 24px rgba(0,0,0,.18);
      padding-bottom: 20px; /* กันท้ายไม่ชนปุ่มลอย */
    }

    /* การ์ดฟอร์มสวยขึ้น */
    .calc-box.form-card{
      background: linear-gradient(180deg, #ffd2d2, #f7b0b0);
      border: 2px solid rgba(255,255,255,.5);
      box-shadow: 0 12px 26px rgba(102, 21, 21, .25), inset 0 1px 0 rgba(255,255,255,.35);
      border-radius: 14px;
      padding: 18px 16px;
      margin: 0 auto 10px;
      max-width:520px;
    }

    /* จัด label + input ให้อยู่แถวเดียว */
    .dose-row{
      display: grid;
      grid-template-columns: auto 1fr;  /* label | input */
      align-items: center;
      column-gap: 10px;
      row-gap: 8px;
      max-width: 460px;
      margin: 0 auto;
    }
    .dose-row label{ font-weight: 700; }

    /* ช่องกรอกอ่านง่าย + เอฟเฟกต์โฟกัส */
    .dose-row input[type="number"]{
      width: 90%;
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid rgba(0,0,0,.15);
      background: #fff;
      box-shadow: inset 0 1px 1px rgba(0,0,0,.06);
      text-align: center;
      transition: box-shadow .2s ease, border-color .2s ease, transform .06s ease;
    }
    .dose-row input[type="number"]:focus{
      outline: none;
      border-color: #ff6b6b;
      box-shadow: 0 0 0 3px rgba(255,107,107,.25);
    }

    /* เว้นช่องไฟปุ่มให้ห่างจากช่องกรอก */
    .btn-wrap{
      margin-top: 14px;         /* << ระยะห่างหลัก */
      display: flex;
      justify-content: center;
    }

    /* ปุ่มโทนแดงไล่เฉด */
    .btn{
      display:inline-block; text-decoration:none; color:#fff; font-weight:800;
      border:none; border-radius:12px; padding:10px 18px;
      min-width:130px; text-align:center; cursor:pointer;
      box-shadow:0 8px 18px rgba(0,0,0,.22), inset 0 1px 0 rgba(255,255,255,.35);
      transition: filter .2s ease, transform .06s ease;
    }
    .btn-blue{
      background: linear-gradient(135deg, #ff6b6b, #ff3b3b);
      border: 1px solid rgba(255,255,255,.35);
    }
    .btn:hover{ filter: brightness(1.06); transform: translateY(-1px); }
    .btn:active{ transform: translateY(1px); }

    /* กล่องผลลัพธ์ */
    .result{
      margin-top:10px; padding:15px;
      background:#f0f0f0; border-radius:8px; font-size:16px;
      border:1px dashed #cbd5e1; text-align:left;
    }
    .result p{ margin:5px 0; line-height:1.25; }

    /* เนื้อหาวิชาการ */
    .left-align{ text-align:left; line-height:1.2; }
    .left-align p{ margin:5px 0; }
    .list{ list-style:none; margin:5px 0; padding-left:20px; }
    .list li{ margin:3px 0; }
    .list li::before{ content:"➢ "; font-size:18px; margin-right:5px; }
    .item{ margin-left:20px; }
    .item::before{ content:"☞ "; margin-right:5px; }

    /* footer */
    footer.page-footer{
      text-align:center; color:#ffffff;
      text-shadow:2px 2px 5px rgba(0,0,0,0.7);
      margin: 6px 0 var(--floatbar-gap);
      font-size:14px;
    }

    /* ปุ่มลอยติดล่าง */
    .float-actions{
      position: fixed !important;
      left: 50%;
      bottom: calc(10px + env(safe-area-inset-bottom, 0px));
      transform: translateX(-50%);
      z-index: 9999;

      display: flex; gap: 12px; align-items:center; justify-content:center;
      padding: 8px 10px; border-radius: 14px;
      background: rgba(15,23,42,.35);
      border: 1px solid rgba(255,255,255,.2);
      box-shadow: 0 8px 18px rgba(2,8,23,.28);
      backdrop-filter: blur(8px) saturate(120%);
      -webkit-backdrop-filter: blur(8px) saturate(120%);
    }
    .float-actions .btn{
      min-width:130px; font-weight:700; border-radius:12px;
    }
    .back-button-secondary{ background:#008CBA; }
    .back-button-secondary:hover{ filter:brightness(1.06); }
    .back-button{ background:#f44336; }
    .back-button:hover{ filter:brightness(1.06); }

    /* จอเล็ก */
    @media (max-width:768px){
      .container{ padding:15px; }
      .float-actions .btn{ min-width:120px; }
    }
  </style>
</head>
<body>

  <h2>Aminophylline (250mg/10ml)</h2>

  <div class="container">
    <!-- ฟอร์มเดียว (เลิกซ้อนฟอร์ม) -->
    <form method="POST" class="calc-box form-card">
      <input type="hidden" name="action" value="dose" />

      <div class="dose-row">
        <label for="dose">กรอกขนาดยา (mg):</label>
        <input
          type="number"
          id="dose"
          name="dose"
          placeholder="ขนาดยา (mg)"
          required
          step="0.01"
          value="{{ dose if dose is not none else '' }}"
        >
      </div>

      <div class="btn-wrap">
        <button type="submit" class="btn btn-blue">คำนวณ</button>
      </div>
    </form>

    {% if dose %}
      <div class="result">
        <p style="text-align:center;margin:6px 0;">
          <b>Order :</b> Aminophylline {{ dose }} mg
        </p>
        <div class="left-align">
          <p><b>วิธีเตรียม :</b> 5% Dextrose in water 60 u + ยา 40 u (10 mg)</p>
          <p>
            <b>ขนาดยาที่ใช้ : </b>{{ dose }} mg =
            <span style="background:#ffea00; padding:3px 6px; border-radius:6px; font-weight:800;">
              {{ (dose * 10) | int }} u
            </span>
          </p>
        </div>
      </div>
    {% endif %}

    <div class="left-align" style="margin-top:10px">
      <p><b>ขนาดยา :</b> 1.5 mg/kg/dose</p>

      <p><b>ความคงตัว</b></p>
      <p class="item">สารละลายที่เจือจาง : D5W, NSS</p>
      <p class="item">หลังการผสม</p>
      <ul class="list">
        <li>อุณหภูมิห้อง : 24 hr</li>
        <li>ตู้เย็น (2–8 °C) : 4 days</li>
      </ul>

      <p><b>Drug incompatibility</b></p>
      <ul class="list">
        <li>PGS</li><li>Methylprednisolone</li>
        <li>Adrenaline</li><li>Ceftriaxone</li>
        <li>Dobutamine</li><li>Insulin</li>
        <li>Ciprofloxacin</li>
      </ul>

      <p><b>Monitor</b></p>
      <ul class="list">
        <li>อัตราการเต้นของหัวใจ: ถ้า &gt; 180/min ให้ hold dose นั้นๆ; Tachycardia, arrhythmias</li>
        <li>Glucose level</li>
        <li>Palpitations, hypotension</li>
      </ul>
    </div>
  </div><!-- /container -->

  <!-- footer -->
  <footer class="page-footer">
    <p>Developed by Sukhontha Boonsookchan | update {{ update_date }}</p>
  </footer>

  <!-- ปุ่มลอย -->
  <div class="float-actions">
    <a href="{{ url_for('medication_administration') }}" class="btn back-button-secondary">Back</a>
    <a href="{{ url_for('index') }}" class="btn back-button">Back to Home</a>
  </div>

</body>
</html>
