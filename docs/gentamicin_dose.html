<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes">
  <title>Gentamicin Dosage Information</title>

  <style>
    html, body {
      margin: 0;
      padding: 0;
    }

    body {
      font-family: Arial, sans-serif;
      background-color: #f9f9f9;
    }

    /* ‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏•‡∏≤‡∏á‡∏à‡∏≠ ‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡πâ‡∏ô‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏≠‡∏¢ */
    .page-wrap {
      max-width: 900px;
      margin: 0 auto;
      padding: 24px 24px 150px;
      box-sizing: border-box;
      background-color: #fff;
      min-height: 100vh;
    }

    h1 {
      color: #fcf2f2;
      font-size: 28px;
      font-weight: bold;
      padding: 10px;
      border: 2px solid #afaaaa;
      border-radius: 10px;
      background-color: #2c8ed0;
      text-align: center;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
      font-size: 16px;
      text-align: center;
    }

    th, td {
      padding: 12px;
      border-bottom: 1px solid #ddd;
    }

    th {
      background-color: #f2f2f2;
    }

    .highlight {
      background-color: #c3e6cb;
    }

    .dose-range {
      color: red;
      font-weight: bold;
    }

    .section-title {
      margin-top: 20px;
      font-size: 18px;
      font-weight: bold;
    }

    .highlight-dose {
      color: #ff5733;
      font-weight: bold;
      background-color: #fbe9e7;
      padding: 5px 10px;
      border-radius: 5px;
      font-size: 24px;
    }

    footer.page-footer {
      text-align: center;
      color: #00000035;
      font-size: 13px;
      margin-top: 32px;
    }

    /* ===== ‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏≠‡∏¢‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á ===== */
    .top-fix-actions {
      position: fixed;
      left: 50%;
      transform: translateX(-50%);
      bottom: max(8px, env(safe-area-inset-bottom, 0px));

      width: min(100% - 32px, 560px);
      box-sizing: border-box;

      display: flex;
      justify-content: center;
      gap: 12px;

      padding: 8px 12px;
      border-radius: 16px;
      background: rgba(0, 0, 0, 0.18);
      backdrop-filter: blur(6px);
      z-index: 1000;
    }

    .back-btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 10px 20px;
      font-size: 16px;
      text-decoration: none;
      border-radius: 10px;
      border: none;
      box-shadow: 0 4px #999;
      color: #fff;
      background-color: #f44336;   /* Home = ‡πÅ‡∏î‡∏á */
      cursor: pointer;
      text-align: center;
      line-height: 1.2;
    }

    .back-btn.alt {
      background-color: #008CBA;   /* Back = ‡∏ü‡πâ‡∏≤ */
    }

    .back-btn:hover {
      filter: brightness(1.05);
    }

    .back-btn:active {
      transform: translateY(2px);
      box-shadow: 0 2px #666;
    }

    /* ===== ‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ ===== */
    @media (max-width: 600px) {
      .page-wrap {
        padding: 10px 10px 160px;
      }

      h1 {
        font-size: 20px;
        padding: 5px;
      }

      table {
        font-size: 14px;
      }

      th, td {
        padding: 8px;
      }

      .section-title {
        font-size: 14px;
      }

      .highlight-dose {
        font-size: 18px;
      }

      .top-fix-actions {
        width: min(100% - 20px, 420px);
        bottom: max(10px, env(safe-area-inset-bottom, 0px));
        gap: 8px;
      }

      .back-btn {
        font-size: 13px;
        padding: 8px 10px;
        flex: 1 1 0;
      }
    }
  </style>
</head>
<body>

  <div class="page-wrap">
    
    

    <h1>Gentamicin Dosage Information</h1>

    <!-- PMA / Calc / PNA / BW -->
<p><strong>PMA:</strong>
  <span id="pmaSpan">-</span>
</p>

<p><strong>Calc.:</strong>
  <span id="calcSpan">weeks</span>
</p>

<p><strong>Postnatal Age:</strong>
  <span id="pnaSpan">-</span>
</p>

<div class="section-title">Calculated Dosage</div>

<p>Birth Weight (BW):
  <span id="bwSpan" class="highlight-dose">- kg</span>
</p>

    <div class="section-title">Calculated Dosage for Neonates</div>
<p>Recommended Dose:
  <span id="doseSpan" class="highlight-dose">- mg / dose</span>
</p>

<p>Interval:
  <span id="intervalSpan" class="highlight-dose">-</span>
</p>


    <!-- Dosage Table -->
        <!-- Dosage Table -->
    <table id="gentaTable">
      <tr>
        <th>PMA</th>
        <th>Postnatal Age (days)</th>
        <th>Dose (mg/kg)</th>
        <th>Interval</th>
      </tr>

      <!-- ‚â§29 wk, 0‚Äì7 d -->
      <tr
        data-pma-min="0"   data-pma-max="29.9"
        data-pna-min="0"   data-pna-max="7"
        data-dose="5"      data-interval="48">
        <td>29 wk-</td>
        <td>0 - 7 days</td>
        <td>5.00</td>
        <td>q 48 hr(s)</td>
      </tr>

      <!-- ‚â§29 wk, 8‚Äì28 d -->
      <tr
        data-pma-min="0"   data-pma-max="29.9"
        data-pna-min="8"   data-pna-max="28"
        data-dose="4"      data-interval="36">
        <td>29 wk-</td>
        <td>8 - 28 days</td>
        <td>4.00</td>
        <td>q 36 hr(s)</td>
      </tr>

      <!-- ‚â§29 wk, ‚â•29 d -->
      <tr
        data-pma-min="0"   data-pma-max="29.9"
        data-pna-min="29"  data-pna-max="365"
        data-dose="4"      data-interval="24">
        <td>29 wk-</td>
        <td>29 days+</td>
        <td>4.00</td>
        <td>q 24 hr(s)</td>
      </tr>

      <!-- 30‚Äì34 wk, 0‚Äì7 d -->
      <tr
        data-pma-min="30"  data-pma-max="34"
        data-pna-min="0"   data-pna-max="7"
        data-dose="4.5"    data-interval="36">
        <td>30 - 34 wk</td>
        <td>0 - 7 days</td>
        <td>4.50</td>
        <td>q 36 hr(s)</td>
      </tr>

      <!-- 30‚Äì34 wk, ‚â•8 d -->
      <tr
        data-pma-min="30"  data-pma-max="34"
        data-pna-min="8"   data-pna-max="365"
        data-dose="4"      data-interval="24">
        <td>30 - 34 wk</td>
        <td>8 days+</td>
        <td>4.00</td>
        <td>q 24 hr(s)</td>
      </tr>

      <!-- ‚â•35 wk, ‡∏ó‡∏∏‡∏Å‡∏≠‡∏≤‡∏¢‡∏∏ -->
      <tr
        data-pma-min="35"  data-pma-max="60"
        data-pna-min="0"   data-pna-max="365"
        data-dose="4"      data-interval="24">
        <td>35 wk+</td>
        <td>ALL</td>
        <td>4.00</td>
        <td>q 24 hr(s)</td>
      </tr>
    </table>

    <div class="section-title">IV infusion</div>
    <p>Compatible Solution: D5W, D10W, NSS.</p>
    <p>Max Concentration: 10 mg/ml</p>
    <p>IV infusion ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢: 30-120 ‡∏ô‡∏≤‡∏ó‡∏µ</p>
    <p>‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏î‡πâ‡∏ß‡∏¢ Syringe pump</p>

    <!-- SCRIPT ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏î‡∏∂‡∏á‡∏Ñ‡πà‡∏≤‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì -->
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        const params   = new URLSearchParams(window.location.search);
        const pmaWeeks = parseInt(params.get('pma_weeks') || '0', 10);
        const pmaDays  = parseInt(params.get('pma_days')  || '0', 10);
        const calc     = parseFloat(params.get('calc')    || '0');
        const pnaDays  = parseInt(params.get('postnatal_days') || '0', 10);
        const bw       = parseFloat(params.get('bw')      || '0');

        // element ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•
        const pmaSpan      = document.getElementById('pmaSpan');
        const calcSpan     = document.getElementById('calcSpan');
        const pnaSpan      = document.getElementById('pnaSpan');
        const bwSpan       = document.getElementById('bwSpan');
        const doseSpan     = document.getElementById('doseSpan');
        const intervalSpan = document.getElementById('intervalSpan');

        if (!pmaSpan || !calcSpan || !pnaSpan || !bwSpan || !doseSpan || !intervalSpan) {
          console.error('Missing DOM elements on Gentamicin page');
          return;
        }

        // ----- ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡πà‡∏≤ PMA / Calc / Postnatal age / BW -----
        pmaSpan.textContent = (pmaWeeks || pmaDays)
          ? `${pmaWeeks} weeks ${pmaDays} days`
          : '-';

        calcSpan.textContent = calc
          ? `${calc.toFixed(1)} weeks`
          : 'weeks';

        pnaSpan.textContent = pnaDays
          ? `${pnaDays} days`
          : '-';

        bwSpan.textContent = bw
          ? `${bw.toFixed(2)} kg`
          : '- kg';

        // ----- ‡∏´‡∏≤‡πÅ‡∏ñ‡∏ß‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á GA/PNA ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì dose + highlight -----
        const table = document.getElementById('gentaTable');
        let matchedRow = null;
        let dosePerKg = 0;
        let intervalHours = null;

        if (table) {
          const ga = pmaWeeks || calc || 0;

          const rows = table.tBodies.length
            ? table.tBodies[0].rows
            : table.rows;

          // ‡∏•‡πâ‡∏≤‡∏á highlight ‡πÄ‡∏î‡∏¥‡∏°
          Array.from(rows).forEach(row => {
            if (row.querySelector('th')) return;
            row.classList.remove('highlight');
          });

          // ‡∏´‡∏≤ row ‡∏ó‡∏µ‡πà match
          Array.from(rows).forEach(row => {
            if (row.querySelector('th')) return;

            const pmaMin = Number(row.dataset.pmaMin);
            const pmaMax = Number(row.dataset.pmaMax);
            const pnaMin = Number(row.dataset.pnaMin);
            const pnaMax = Number(row.dataset.pnaMax);

            if (
              !Number.isNaN(pmaMin) && !Number.isNaN(pmaMax) &&
              !Number.isNaN(pnaMin) && !Number.isNaN(pnaMax) &&
              ga      >= pmaMin && ga      <= pmaMax &&
              pnaDays >= pnaMin && pnaDays <= pnaMax
            ) {
              matchedRow = row;
            }
          });

          if (matchedRow) {
            matchedRow.classList.add('highlight');

            const d = Number(matchedRow.dataset.dose);
            if (!Number.isNaN(d) && d > 0) dosePerKg = d;

            const iv = Number(matchedRow.dataset.interval);
            if (!Number.isNaN(iv) && iv > 0) intervalHours = iv;
          }
        }

        // ----- ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì Recommended Dose = dosePerKg √ó BW -----
        if (bw > 0 && dosePerKg > 0) {
          const doseMg = dosePerKg * bw;
          doseSpan.textContent = `${doseMg.toFixed(2)} mg / dose`;
        } else {
          doseSpan.textContent = '- mg / dose';
        }

        // ----- ‡πÅ‡∏™‡∏î‡∏á interval ‡∏à‡∏≤‡∏Å row ‡∏ó‡∏µ‡πà match -----
        if (intervalHours) {
          intervalSpan.textContent = `q ${intervalHours} hr(s)`;
        } else {
          intervalSpan.textContent = '-';
        }
      });
    </script>


    <footer class="page-footer">
      <p>Developed by Sukhontha Boonsookchan | update 2025-11-15</p>
    </footer>
  </div>

  <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏≠‡∏¢‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á -->
  <div class="top-fix-actions" role="navigation" aria-label="Quick actions">
    <a href="javascript:history.back()" class="back-btn alt">‚¨Ö Back</a>
    <a href="./index.html" class="back-btn">üè† Back to Home</a>
  </div>

</body>
</html>